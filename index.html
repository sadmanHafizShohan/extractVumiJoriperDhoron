<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>শুধু ভূমি জরিপের ধরন আলাদা করবে</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background-color: #f0f2f5;
    color: #333;
    margin: 0;
    padding: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  .container {
    background-color: #fff;
    padding: 40px;
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    width: 100%;
    max-width: 800px;
  }
  h2 {
    text-align: center;
    color: #0078d7;
    margin-bottom: 30px;
  }
  textarea {
    width: 100%;
    height: 200px;
    padding: 15px;
    font-size: 14px;
    border: 1px solid #ddd;
    border-radius: 5px;
    resize: vertical;
    margin-bottom: 20px;
    box-sizing: border-box;
  }
  button {
    display: block;
    width: 100%;
    padding: 12px;
    background: linear-gradient(45deg, #0078d7, #005a9e);
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    font-weight: 500;
    transition: background 0.3s ease;
  }
  button:hover {
    background: linear-gradient(45deg, #005a9e, #003c6b);
  }
  table {
    margin-top: 30px;
    border-collapse: collapse;
    width: 100%;
    background: #fff;
    border-radius: 5px;
    overflow: hidden;
  }
  th, td {
    border: 1px solid #ddd;
    padding: 12px;
    text-align: left;
    font-size: 14px;
  }
  th {
    background-color: #0078d7;
    color: #fff;
  }
  tr:nth-child(even) {
    background-color: #f9f9f9;
  }
  tr:hover {
    background-color: #f1f1f1;
  }
  .selected {
    background-color: #d4edda !important;
  }
  #result h3 {
    text-align: center;
    color: #333;
    margin-bottom: 20px;
  }
</style>
</head>
<body>
<div class="container">
  <h2>Created by @Sadman Hafiz Shohan</h2>
  <h2>শুধু ভূমি জরিপের ধরন আলাদা করবে</h2>

  <textarea id="inputText">এগুলো কেটে দিয়ে এই বক্সে আপনার টেক্সট পেস্ট করুন এভাবে 
সময়: 10/27/2025, 10:53:17 AM
হোল্ডিং নং: ৬৬
খতিয়ান নং: ৬৬
মন্তব্য: ভূমি জরিপের ধরন ঠিক করতে হবে
------------------
সময়: 10/27/2025, 10:53:17 AM
হোল্ডিং নং: ৯২
খতিয়ান নং: ৯২
মন্তব্য: কর পরিশোধের সাল সংশোধন করতে হবে
------------------
সময়: 10/27/2025, 10:53:22 AM
হোল্ডিং নং: ৯৮
খতিয়ান নং: ৯৮
মন্তব্য: ভূমি জরিপের ধরন ঠিক করতে হবে
------------------
সময়: 10/27/2025, 10:53:24 AM
হোল্ডিং নং: ৯৬
খতিয়ান নং: ৯৬
মন্তব্য: ভূমি জরিপের ধরন ঠিক করতে হবে
------------------
সময়: 10/27/2025, 10:53:26 AM
হোল্ডিং নং: ৬৬
খতিয়ান নং: ৬৬
মন্তব্য: ভূমি জরিপের ধরন ঠিক করতে হবে
------------------
সময়: 10/27/2025, 10:53:27 AM
হোল্ডিং নং: ৯৫
খতিয়ান নং: ৯৫
মন্তব্য: ভূমি জরিপের ধরন ঠিক করতে হবে
------------------
সময়: 10/27/2025, 10:53:29 AM
হোল্ডিং নং: ৯৩
খতিয়ান নং: ৯৩
মন্তব্য: জমির পরিমাণ সংশোধন করতে হবে
</textarea>

  <button id="extractBtn">Extract</button>

  <div id="result"></div>
</div>

<script>
document.getElementById("extractBtn").addEventListener("click", function() {
  const text = document.getElementById("inputText").value.trim();
  const records = text.split(/[-]{6,}/).map(s => s.trim()).filter(Boolean);

  let extractedData = [];

  const bengaliToEnglish = {
    '০': 0, '১': 1, '২': 2, '৩': 3, '৪': 4, '৫': 5, '৬': 6, '৭': 7, '৮': 8, '৯': 9
  };

  const convertBengaliToEnglish = (bengaliNumber) => {
    return parseInt(String(bengaliNumber).replace(/[০-৯]/g, d => bengaliToEnglish[d]));
  };

  for (const rec of records) {
    const holdingMatch = rec.match(/হোল্ডিং\s*নং[:：]?\s*([০-৯0-9]+)/u);
    const khatianMatch = rec.match(/খতিয়ান\s*নং[:：]?\s*([০-৯0-9]+)/u);
    const commentMatch = rec.match(/মন্তব্য[:：]?\s*(.+)/u);

    const holding = holdingMatch ? holdingMatch[1] : "";
    const khatian = khatianMatch ? khatianMatch[1] : "";
    const comment = commentMatch ? commentMatch[1] : "";

    if (comment.includes("ভূমি জরিপ")) {
      extractedData.push({
        holding: holding,
        khatian: khatian,
        comment: comment,
        holdingNumeric: convertBengaliToEnglish(holding)
      });
    }
  }

  extractedData.sort((a, b) => a.holdingNumeric - b.holdingNumeric);

  let resultHTML = "";
  let found = 0;
  const uniqueRecords = new Set();

  let tableHTML = "<table><tr><th>হোল্ডিং নং</th><th>খতিয়ান নং</th><th>মন্তব্য</th></tr>";

  for (const data of extractedData) {
    const uniqueIdentifier = `${data.holding}-${data.khatian}`;
    if (!uniqueRecords.has(uniqueIdentifier)) {
      uniqueRecords.add(uniqueIdentifier);
      tableHTML += `<tr><td>${data.holding}</td><td>${data.khatian}</td><td>${data.comment}</td></tr>`;
      found++;
    }
  }

  tableHTML += "</table>";
  resultHTML = `<h3>মোট ${found} টি ভূমি জরিপের রেকর্ড পাওয়া গেছে।</h3>` + tableHTML;


  document.getElementById("result").innerHTML =
    found ? resultHTML : "<p>কোনো ভূমি জরিপ মন্তব্য পাওয়া যায়নি।</p>";
});

document.getElementById("result").addEventListener("click", function(e) {
  if (e.target && e.target.nodeName === "TD") {
    e.target.parentNode.classList.toggle("selected");
  }
});
</script>
</body>
</html>
